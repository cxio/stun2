syntax = "proto3";

// PUAddr 节点UDP地址
// 服务器在 STUN:Cone 响应中向客户端告知其公网地址。
message PUAddr {
    bytes ip = 1; // 公网IP
    int32 port = 2; // 公网端口（NAT映射）
}

// LiveNAT 信息包
// 客户端向 STUN:Live 服务器提供的信息。
message LiveNAT {
    bytes sn16 = 1; // 会话序列号（16字节）
    int32 port = 2; // 旧端口（之前的 NAT 公网映射）
}

// HostTo NewHost协助消息
// 服务器转送客户端 UDP 信息，由另一IP或服务器发送。
// 注：rnd16[0] 低2位设置 NewPort|NewHost。
message HostTo {
    bytes ip = 1; // 公网IP
    int32 port = 2; // 端口
    bytes bas16 = 3; // 会话标识因子（用于计算SN）
}

option go_package = "../base";
